<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <link rel="stylesheet" href="qunit/qunit.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="../style/test.css" type="text/css" media="screen" />

<script type="text/javascript" src="fail.js"></script>

<script type="text/javascript" src="qunit/qunit.js"></script>

<script type="text/javascript" src="../script/cgd/debug.js"></script>
<script type="text/javascript" src="../script/cgd/require.js"></script>

  <script>

test("includes a file", function() {
  expect(1);
  stop();
  CGD.JS.require.include('pass.js');
  setTimeout(start, 100);
});

test("includes a file twice", function() {
  expect(2);
  stop();
  CGD.JS.require.include('pass.js');
  CGD.JS.require.include('pass.js');
  setTimeout(start, 100);
});

test("detects static script files", function() {
  for (var i in CGD.JS.require.files) {
    if (CGD.JS.require.files[i].match(/qunit.js/)) {
      ok(true, 'found static file');
      return;
    }
  }
  ok(false, 'did not find static file');
});

test("require includes a file only once", function() {
  expect(0);
  stop();
  CGD.JS.require('fail.js');
  setTimeout(start, 100);
});

test("relative path context", function() {
  expect(1);
  stop();
  CGD.JS.require.under('subdir', function() {
    CGD.JS.require('subpass.js');
  });
  setTimeout(start, 100);
});

test("absolute path context", function() {
  expect(1);
  stop();
  CGD.JS.require.within('subdir/subpass.js', function() {
    CGD.JS.require('subsubdir/subsubpass.js');
  });
  setTimeout(start, 100);
});

test("module can load dependencies before continuing", function() {
  expect(1);
  stop();
  CGD.JS.require('module.js');
  setTimeout(start, 100);
});
  </script>
  
</head>
<body onload="CGD.DEBUG.onload();">
 <h1 id="qunit-header">QUnit example</h1>
 <h2 id="qunit-banner"></h2>
 <h2 id="qunit-userAgent"></h2>
 <ol id="qunit-tests"></ol>
 <div id="debugDiv" />
</body>
</html>
</html>